DROP DATABASE IF EXISTS QUICKLEND;

CREATE DATABASE QUICKLEND;

USE QUICKLEND;

CREATE TABLE Users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) NOT NULL,
  email VARCHAR(50) NULL,
  psswd VARCHAR(255) NOT NULL,
  admin_level INT NOT NULL default(1)		
);
INSERT INTO Users (username, email, psswd) VALUES
  ('admin', 'usuario1@example.com', 'admin'),
  ('Usuario 2', 'usuario2@example.com', 'contrasena2'),
  ('Usuario 3', 'usuario3@example.com', 'contrasena3');
  

CREATE TABLE Borrowers 
(
    id INT PRIMARY KEY AUTO_INCREMENT,
    FULL_NAME VARCHAR(512),
    IDENTIFICATION_NUMBER VARCHAR(512),
    PHONE VARCHAR(512),
    AGE VARCHAR(512),
    SEX ENUM('Hombre', 'Mujer'),
    ADDRESS VARCHAR(512),
    WORKPLACE VARCHAR(512),
    WORKING_TIME VARCHAR(512)
);

INSERT INTO Borrowers (FULL_NAME, IDENTIFICATION_NUMBER, PHONE, AGE, ADDRESS, WORKPLACE, WORKING_TIME) VALUES
	('LEANDRO TAVAREZ ABREU', '225-0041392-1', '849-642-1454', 'XX', 'SAN FELIPE DE VILLA MELLA', 'METRICAS SRL', '0,375'),
	('LISBELY LARA ABAD', '402-1466800-2', '849-626-8724', 'XX', 'C/ PROLONGACION PRIMERA NO. 19. LOS FRAILES II', 'ZONA FRANCA POINT BLACK', '1 YEAR'),
	('JOSE MARIA SANCHEZ', '001-1221092-7', '829-793-7209', '50', 'AV. LOPE DE VEGA NO. 121', 'HOSPITAL SOCORRO SANCHEZ', '0.041666667'),
	('CARLOS SANCHEZ', '001-1289940-6', '829-883-6870', 'XX', 'JACOBO MAJCLUTA', 'TROPIGAS', 'XX'),
	('UNELIS RODRIGUEZ ACOSTA', '229-0025584-9', '829-365-3563', 'XX', 'CALLE EL RETIRO NO. 26', 'LUKE BORDADOS', '8 YEARS'),
	('ROSA HERMINIA ROSA RODRIGUEZ', '001-0760020-7', '829-314-5581', '50', 'PANTOJA', 'THE BEAUTY LAB', '1 YEAR AND 6 MONTHS'),
	('RADAME MONTES DE OCA MONTERO', '014-0023197-1', '849-283-3062', 'xx', 'C/ Euclides Morillo, Peaton C4, El Milloncito.', 'Alcadia Santo Domingo Norte', '2 Years'),
	('JAZMIN DE LA ROSA LORENZO', '223-0156904-6', '829-676-6925', 'XX', 'LA TORONJA', 'ZONA POINT BLACK', '1 YEAR'),
	('YISELYS GARCIA', '402-2292762-2', 'XX', 'XX', 'EL ALMIRANTE', 'ZONA FRANCA POINT BLACK', '1 YEAR'),
	('ALBERTO ESTEBAN GOMEZ ', '001-1828750-7', 'X', 'X', 'X', 'INDEPENDENT', 'X'),
	('MARCOS CASTRO', '223-00799868-7', '849-206-9717', 'XX', 'C/ ALBERTO CAAMAÃ‘O 21', 'GUARDIANES', '9 MONTHS'),
	('Juan A. Gomez', '402-2213716-4', '849-885-8688', '27', 'Calla D Arroyo Hondo', 'Aduanas', '8 Years'),
	('BRENDY GUZMAN', '001-1802378-7', '8496078064', 'XXX', 'TORRE JIRETH ', 'DOMINITRANS', '1 YEAR'),
	('FRANCIS DE OLEO', '001-1947129-0', '809-447-8841', '27', 'C/Q No.5, ARROYO HONDO', 'THE BEAUTYLAB', '7 MONTHS'),
	('LEONELA ALCANTARA', '223-0106277-8', '809-874-6951', 'XX', 'SABANA PERDIDA', 'COLEGIO EL NAZARENO', '8 YEARS'),
	('ADONNYS MEDINA NOVAS', '402-2157443-3', '829-586-0638', 'XX', 'MANOGUAYABO', 'DGA', '11 MONTHS'),
	('MELISSA ALTAGRACIA DEL ROSARIO RODRIGUEZ', '40200370977', '8296959115', 'XX', 'LOS MAMEYES', 'XX', 'XX'),
	('JOSE FELIX BRAZOBAN MARTINEZ', '001-1426487-2', '809-803-3754', 'XX', 'VILLA MELLA', 'XX', '30 YEARS'),
	('SUGEIRY NACARY DE LA CRUZ', '001-1432567-3', '849-642-9590', 'XX', 'MENDOZA', 'ZONA POINT BLACK', '6 MONTHS'),
	('JUAN PABLO POLANCO', '001-0378768-5', 'XX', 'XX', 'NUEVO AMANECER', 'COLMADO', 'OWN'),
	('LUZ EVANGELINA GONZALEZ CUEVAS', '018-00683466', '849-633-8222', 'XX', 'LOS 3 BRAZOS', 'MUSA SALON', '3 MONTHS'),
	('ANA PAMELA PAULA RAPOSO', '22301032854', '829-278-0626', 'XX', 'ENSANCHE ISABELITA', 'XX', 'XX'),
	('SAUDITH MABELL MEJIA REYES', '402-37754953', '829-662-5751', '35', 'CALLE LOPE DE VEGA', 'NAILED', '2 YEARS AND 6 MONTHS'),
	('KAREN NINOSKA MENDOZA RODRIGUEZ', '001-1754986-5', '829-301-9771', '39 YEARS', 'C/ ROCA FUERTE #21A. PERLA ANTILLANA', 'ZF POINT BLACK', '1 YEAR'),
	('PEDRO RUDECINDO MARTINEZ', '223-0013409-9', '829-958-6695', '38 YEARS', 'CALLE B #38. LOS 3 BRAZOS.', 'HUGO APP', '1 YEAR AND 6 MONTHS'),
	('PIERANYELIS ROSAURA HERNANDEZ REYES', '223-0014314-0', '829-887-1196', '37 YEARS', 'C/ Pedro ledesma #7. El almirante.', 'ZF POINT BLANK', '9 MONTHS'),
	('WALTER MANUEL PEREZ DE LA PAZ', '001-1448937-0', '809-716-1244', '42 YEARS', 'CALLE FELIZ GARCIA #61, PADRO ORIENTAL', 'ZF POINT BLACK', '4 MONTHS'),
	('JENNIFER NEPOMUCENO', '402-3980840-1', '829-856-1896', '26', 'CALLE MONICA MOTA #27. EL TAMARINDO', 'ZF POINT BLANK', '6 MONTHS'),
	('LUCIEL GERONIMO VANDERHORT', '001-1576473-0', '809-316-7610', '42', 'CALLE PRIMERA #91, PUEBLO NUEVO, VILLA DUARTE', 'ZF POINT BLANK', '9  MONTHS');
    
    CREATE TABLE Loans (
  id INT PRIMARY KEY AUTO_INCREMENT,
  borrower_id INT,
  importeCredito DECIMAL(10, 2),
  modalidad ENUM('Mensual', 'Semanal', 'Quincenal', 'Diario'),
  tasa DECIMAL(5, 2),
  numCuotas INT,
  importeCuotas DECIMAL(10, 2),
  totalAPagar DECIMAL(10, 2),/*Total pagado se verificara buscando cuanto ha pagado tal cliente a tal prestamo*/
  fecha DATE,
  cuotasSegunModalidad VARCHAR(255),
  FOREIGN KEY (borrower_id) REFERENCES Borrowers (id)
);

    CREATE TABLE LoansDrafts (
  id INT PRIMARY KEY AUTO_INCREMENT,
  borrower_id INT,
  importeCredito DECIMAL(10, 2),
  modalidad ENUM('Mensual', 'Semanal', 'Quincenal', 'Diario'),
  tasa DECIMAL(5, 2),
  numCuotas INT,
  importeCuotas DECIMAL(10, 2),
  totalAPagar DECIMAL(10, 2),/*Total pagado se verificara buscando cuanto ha pagado tal cliente a tal prestamo*/
  fecha DATE,
  cuotasSegunModalidad VARCHAR(255),
  FOREIGN KEY (borrower_id) REFERENCES Borrowers (id)
);

CREATE TABLE Payments (
  id INT PRIMARY KEY AUTO_INCREMENT,
  loan_id INT,
  cuotaNumero INT,
  fechaPago DATE,
  montoPagado DECIMAL(10, 2),
  status ENUM('Pagado', 'No Pagado', 'Vencido'),
  fechaAPagar date,
  FOREIGN KEY (loan_id) REFERENCES Loans (id)
);

Create Table Ranking(
id INT PRIMARY KEY AUTO_INCREMENT,
borrower_id INT,
ranking_level decimal (10,2),
notes varchar(255),
FOREIGN KEY (borrower_id) REFERENCES Borrowers (id)
)